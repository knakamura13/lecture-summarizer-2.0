1
00:00:00,000 --> 00:00:04,140
 Recall the expression that we just obtained for the false positive probability.

2
00:00:04,140 --> 00:00:08,070
 The expression was one minus E to the minus K over C raised to

3
00:00:08,070 --> 00:00:11,771
 the power K. Let's look at this as a function of K. So look,

4
00:00:11,771 --> 00:00:14,300
 Let F of K denote this expression.

5
00:00:14,300 --> 00:00:18,420
 This is F of K is a false positive probability for a specific choice of K,

6
00:00:18,420 --> 00:00:20,370
 the number of hash functions.

7
00:00:20,370 --> 00:00:23,925
 Our goal is to figure out what's the optimal choice for the number of hash functions,

8
00:00:23,925 --> 00:00:27,570
 in order to minimize this false positive probability. So what do we do?

9
00:00:27,570 --> 00:00:32,820
 We are going to minimize this function F of K. How do we find the optimal choice of K?

10
00:00:32,820 --> 00:00:34,170
 Well, we take it's derivative,

11
00:00:34,170 --> 00:00:35,550
 set it equal to zero.

12
00:00:35,550 --> 00:00:37,765
 Check whether it's a global minimum.

13
00:00:37,765 --> 00:00:39,750
 And then we find that choice of K,

14
00:00:39,750 --> 00:00:42,260
 which sets the derivative equal to zero.

15
00:00:42,260 --> 00:00:44,025
 Where does that optimal happen?

16
00:00:44,025 --> 00:00:46,925
 It happens at K equals C times LN two.

17
00:00:46,925 --> 00:00:49,070
 That's the natural log of two.

18
00:00:49,070 --> 00:00:51,280
 The log base E of two.

19
00:00:51,280 --> 00:00:52,740
 I'm going to skip this calculus,

20
00:00:52,740 --> 00:00:54,360
 so that I don't embarrass myself.

21
00:00:54,360 --> 00:00:56,790
 I've forgotten my calculus too, so don't worry.

22
00:00:56,790 --> 00:00:58,830
 But let's look at this choice of K,

23
00:00:58,830 --> 00:01:01,080
 which is the optimal choice in order to minimize

24
00:01:01,080 --> 00:01:03,945
 the false positive probability. It's quite interesting.

25
00:01:03,945 --> 00:01:08,445
 Actually, first off, let's plug this choice of K back into this expression.

26
00:01:08,445 --> 00:01:10,210
 And then we can simplify it.

27
00:01:10,210 --> 00:01:14,175
 Well, first off, when you plug in K equal C LN two over here,

28
00:01:14,175 --> 00:01:15,360
 then the C is cancelled,

29
00:01:15,360 --> 00:01:16,950
 and you're left with LN two.

30
00:01:16,950 --> 00:01:19,455
 And then on the outside we have C LN two.

31
00:01:19,455 --> 00:01:22,035
 What is E to the minus LN two?

32
00:01:22,035 --> 00:01:23,955
 That's exactly one half.

33
00:01:23,955 --> 00:01:26,970
 And what's one minus a half? It's a half.

34
00:01:26,970 --> 00:01:30,730
 So the inside is one half raised to the power C LN two.

35
00:01:30,730 --> 00:01:32,845
 Let's separate the C from LN two.

36
00:01:32,845 --> 00:01:34,630
 So we have one half to the LN two,

37
00:01:34,630 --> 00:01:38,185
 all raised to the power C. Now what is this inside?

38
00:01:38,185 --> 00:01:39,640
 This is just a fixed constant.

39
00:01:39,640 --> 00:01:42,075
 It's one half raised to the power LN two.

40
00:01:42,075 --> 00:01:44,460
 You can plug it in on your calculator.

41
00:01:44,460 --> 00:01:48,870
 Turns out that inner expression is .6185 approximately.

42
00:01:48,870 --> 00:01:51,180
 So we have that raised to the power C. C is

43
00:01:51,180 --> 00:01:54,990
 the ratio of the size of our hash table compared to our database.

44
00:01:54,990 --> 00:01:57,735
 Now we have a simple expression for the false positive probability.

45
00:01:57,735 --> 00:02:00,840
 It's .6185 raised to

46
00:02:00,840 --> 00:02:04,965
 the power C. So if you tell me how large of a hash table you're willing to do,

47
00:02:04,965 --> 00:02:07,635
 I can tell you what the false positive probability is.

48
00:02:07,635 --> 00:02:09,097
 Before we look at that,

49
00:02:09,097 --> 00:02:12,660
 let's just take a look at this expression right here.

50
00:02:12,660 --> 00:02:14,929
 I want to point out something interesting about this choice,

51
00:02:14,929 --> 00:02:19,655
 this optimal choice of K. What's a probability a specific bit is zero, or one?

52
00:02:19,655 --> 00:02:22,335
 The chance is one is this inner expression.

53
00:02:22,335 --> 00:02:24,745
 Chance is zero is this expression right here.

54
00:02:24,745 --> 00:02:26,690
 Both of those are one half.

55
00:02:26,690 --> 00:02:29,055
 So the chance we're setting a bit to zero is one half.

56
00:02:29,055 --> 00:02:31,360
 The chance we're setting it to one is a half.

57
00:02:31,360 --> 00:02:35,280
 So what does this binary string look like after we've done M insertions?

58
00:02:35,280 --> 00:02:37,195
 So it's a binary string of length N,

59
00:02:37,195 --> 00:02:41,077
 and we've done M insertions into it. What does it look like?

60
00:02:41,077 --> 00:02:45,415
 Well, each bit afterwards is set to zero with probability half.

61
00:02:45,415 --> 00:02:49,890
 So each bit is randomly set to zero or one.

62
00:02:49,890 --> 00:02:53,610
 So this string H corresponds to a random string,

63
00:02:53,610 --> 00:02:57,345
 where each bit is independently flipped to zero or one.

64
00:02:57,345 --> 00:03:00,780
 So what's interesting, is that the optimal choice of K means,

65
00:03:00,780 --> 00:03:04,215
 that if we just look at what this random string looks like,

66
00:03:04,215 --> 00:03:08,243
 it's going to correspond to a random binary string,

67
00:03:08,243 --> 00:03:11,385
 where each bit is independently set to zero or one.

68
00:03:11,385 --> 00:03:16,995
 So the optimal choice of K corresponds to balancing out the zeros and ones in H,

69
00:03:16,995 --> 00:03:16,995
 so that H looks like a random string.

