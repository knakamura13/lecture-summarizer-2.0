Constructed a flow network from an undirected graph to solve max-flow problem. Each edge leads from original graph vertices to a new vertex 't', with 't' as a sink and another vertex 's' as a source. The capacity of edges to 't' represents the background likelihood, while the capacities from 's' reflect the foreground likelihood; separation penalties are also included. With capacities defined for every edge, the graph is ready for the max-flow problem input.