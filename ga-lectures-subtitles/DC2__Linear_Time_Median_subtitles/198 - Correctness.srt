1
00:00:00,000 --> 00:00:05,040
 We want to prove this claim that this P that we chose in our algorithm is a good pivot.

2
00:00:05,040 --> 00:00:06,360
 How do we find this P?

3
00:00:06,360 --> 00:00:09,540
 Well, we took these groups G1 through Gn/5,

4
00:00:09,540 --> 00:00:11,355
 each with five elements each.

5
00:00:11,355 --> 00:00:13,770
 And we took the median of each of these groups

6
00:00:13,770 --> 00:00:17,075
 and then we took the median of those medians.

7
00:00:17,075 --> 00:00:19,880
 So we took this n/5 medians of these groups,

8
00:00:19,880 --> 00:00:22,650
 and then we recursively ran our algorithm to find the median

9
00:00:22,650 --> 00:00:25,420
 of that subset of size n/5 and that was our

10
00:00:25,420 --> 00:00:27,810
 P. Now what I want to do is I want to sort

11
00:00:27,810 --> 00:00:31,625
 these groups and I want to sort them by their medians.

12
00:00:31,625 --> 00:00:33,051
 So this has a smallest median,

13
00:00:33,051 --> 00:00:34,410
 this has the largest median.

14
00:00:34,410 --> 00:00:37,740
 I'm just relabelling the labels on the groups.

15
00:00:37,740 --> 00:00:39,330
 Now this is just in the proof.

16
00:00:39,330 --> 00:00:42,030
 The algorithm is staying the same just for the purposes of

17
00:00:42,030 --> 00:00:46,620
 the proof as do the thought experiment where we relabel these groups.

18
00:00:46,620 --> 00:00:49,530
 So we've relabeled these groups so that the first group

19
00:00:49,530 --> 00:00:53,195
 has a smallest median and the last group has the largest median.

20
00:00:53,195 --> 00:00:55,392
 Let's look at this set A pictorially,

21
00:00:55,392 --> 00:00:57,270
 and let's look at it by groups.

22
00:00:57,270 --> 00:01:00,570
 Here's the first group that consists of five elements.

23
00:01:00,570 --> 00:01:01,890
 Here's the second group G2.

24
00:01:01,890 --> 00:01:03,702
 It consists of five elements and so on.

25
00:01:03,702 --> 00:01:05,460
 And here's the last group Gn/5,

26
00:01:05,460 --> 00:01:07,365
 which consists of five elements.

27
00:01:07,365 --> 00:01:13,130
 Now, it'll be important for us to consider the middle group, the group Gn/10.

28
00:01:13,130 --> 00:01:17,110
 Now, let's sort each of these groups by smallest to largest.

29
00:01:17,110 --> 00:01:19,260
 This will be the smallest element of this group and this will

30
00:01:19,260 --> 00:01:21,900
 be the largest, and this will be the median.

31
00:01:21,900 --> 00:01:23,565
 This will be the smallest, largest,

32
00:01:23,565 --> 00:01:25,280
 median, and so on.

33
00:01:25,280 --> 00:01:28,890
 In every group, the middle element is the median.

34
00:01:28,890 --> 00:01:31,205
 This is just for the picture purposes.

35
00:01:31,205 --> 00:01:32,328
 Now what does our algorithm do?

36
00:01:32,328 --> 00:01:35,280
 It takes the median of each of these groups. Who is the median?

37
00:01:35,280 --> 00:01:37,350
 It's the middle element right now.

38
00:01:37,350 --> 00:01:40,345
 Our subset S is going to consist of these medians,

39
00:01:40,345 --> 00:01:43,200
 these n/5 medians from each of the groups and

40
00:01:43,200 --> 00:01:47,580
 our pivot is the median of this subset S of medians.

41
00:01:47,580 --> 00:01:53,010
 It's the median of median is our pivot P. Who is the pivot P in this picture?

42
00:01:53,010 --> 00:01:57,105
 It's the middle element, which is exactly the median of this middle group.

43
00:01:57,105 --> 00:01:58,705
 This is P. Now,

44
00:01:58,705 --> 00:02:02,610
 I want to prove that P is a good pivot so I want to first look at which

45
00:02:02,610 --> 00:02:07,405
 elements are guaranteed to be at most P. Who do I know is the most P?

46
00:02:07,405 --> 00:02:09,240
 Well, look at this subset S,

47
00:02:09,240 --> 00:02:13,830
 P is the median of this subset so I know that everybody earlier in this subset,

48
00:02:13,830 --> 00:02:16,980
 these guys up to and including P itself,

49
00:02:16,980 --> 00:02:19,965
 are guaranteed to be at most P. So that's

50
00:02:19,965 --> 00:02:25,185
 n/10 elements that are guaranteed to be at most P. Now, take this first element.

51
00:02:25,185 --> 00:02:29,925
 Who's guaranteed to be at most it in its group, G1?

52
00:02:29,925 --> 00:02:34,440
 Well, I assume this thing was sorted for the picture purposes.

53
00:02:34,440 --> 00:02:38,495
 There's two elements, which are guaranteed to be smaller than that.

54
00:02:38,495 --> 00:02:41,550
 Similarly, in the second group there's two other elements which

55
00:02:41,550 --> 00:02:44,935
 are guaranteed to be at most this median of this group.

56
00:02:44,935 --> 00:02:46,740
 In every group, there's two elements,

57
00:02:46,740 --> 00:02:50,200
 which are guaranteed to be at most this median element.

58
00:02:50,200 --> 00:02:51,990
 So what's my conclusion?

59
00:02:51,990 --> 00:02:54,270
 My conclusion is that all of these elements in

60
00:02:54,270 --> 00:02:58,650
 this box are guaranteed to be at most the pivot P because

61
00:02:58,650 --> 00:03:06,390
 their medians are at most this pivot P and these elements are at most this median.

62
00:03:06,390 --> 00:03:08,075
 What's the area of this box?

63
00:03:08,075 --> 00:03:09,665
 How many elements are in here?

64
00:03:09,665 --> 00:03:14,115
 Well, there's n/10 groups and in each group I got three elements.

65
00:03:14,115 --> 00:03:17,950
 So there's at least three n/10 elements which are guaranteed to be at most

66
00:03:17,950 --> 00:03:23,550
 P. Now look at the partition of A into these subsets: smaller, equal,

67
00:03:23,550 --> 00:03:25,980
 and bigger than P, and look at the subset

68
00:03:25,980 --> 00:03:28,770
 consisting of those elements strictly bigger than the pivot

69
00:03:28,770 --> 00:03:34,945
 P. So this excludes all of those elements which are at most P. So how large is a subset?

70
00:03:34,945 --> 00:03:38,725
 Well, I've excluded at least three n/10.

71
00:03:38,725 --> 00:03:42,990
 So therefore, the size of this is at most 7n/10.

72
00:03:42,990 --> 00:03:45,650
 Recall what was my definition of a good pivot?

73
00:03:45,650 --> 00:03:50,150
 I needed to guarantee that this set is at most 3/4n,

74
00:03:50,150 --> 00:03:53,935
 and I've shown that it's strictly smaller than most 0.7n.

75
00:03:53,935 --> 00:03:55,915
 Now, let's look at the other side.

76
00:03:55,915 --> 00:03:58,585
 Which elements are guaranteed to be at least P?

77
00:03:58,585 --> 00:04:01,820
 Well, now I'm going to look at the other corner.

78
00:04:01,820 --> 00:04:07,950
 All of these elements are guaranteed to be at least P. How many elements are here?

79
00:04:07,950 --> 00:04:13,015
 Well, the same count 3n/10 are guaranteed to be here.

80
00:04:13,015 --> 00:04:17,680
 So, the number of elements that are least P is at least 3n/10 and therefore,

81
00:04:17,680 --> 00:04:23,455
 the number of elements which are strictly less than P is most 7n/10, similarly.

82
00:04:23,455 --> 00:04:23,455
 That proves that P is a good pivot that completes the proof of the claim.

