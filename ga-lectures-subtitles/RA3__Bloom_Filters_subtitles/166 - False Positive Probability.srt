1
00:00:00,000 --> 00:00:01,935
 So what have we done so far?

2
00:00:01,935 --> 00:00:04,350
 We've shown that the probability that a specific bit is

3
00:00:04,350 --> 00:00:07,320
 zero is equal to one minus one over

4
00:00:07,320 --> 00:00:10,410
 N raised to the power M times K. Let's try to

5
00:00:10,410 --> 00:00:13,790
 manipulate this to get a slightly more convenient expression.

6
00:00:13,790 --> 00:00:15,630
 I want to replace this by an exponential.

7
00:00:15,630 --> 00:00:18,895
 Supposed I look at E to the minus A for a number A.

8
00:00:18,895 --> 00:00:22,170
 Let's take a look at the Taylor series for the exponential function.

9
00:00:22,170 --> 00:00:24,018
 Let me remind you of that expression.

10
00:00:24,018 --> 00:00:28,295
 So I have the exponential of minus A, where A is a number.

11
00:00:28,295 --> 00:00:30,945
 That start off with one minus A,

12
00:00:30,945 --> 00:00:33,370
 plus A squared over two factorial,

13
00:00:33,370 --> 00:00:36,080
 minus A cubed over three factorial.

14
00:00:36,080 --> 00:00:38,880
 Notice it's a alternating sign next

15
00:00:38,880 --> 00:00:42,100
 term is A to the fourth over four factorial, and so on.

16
00:00:42,100 --> 00:00:43,584
 You have this infinite series.

17
00:00:43,584 --> 00:00:46,605
 Now for small A this series is decreasing,

18
00:00:46,605 --> 00:00:48,705
 and as A goes to zero,

19
00:00:48,705 --> 00:00:52,530
 then this series is approximated by one minus A.

20
00:00:52,530 --> 00:00:56,060
 So this is a good approximation when A is sufficiently small.

21
00:00:56,060 --> 00:00:59,130
 That's going to correspond in our case to N being sufficiently

22
00:00:59,130 --> 00:01:03,480
 large and we're looking at A as N grows to infinity.

23
00:01:03,480 --> 00:01:08,055
 So let's use this approximation to simplify our analysis of the false positive rate.

24
00:01:08,055 --> 00:01:09,660
 So what can I do here?

25
00:01:09,660 --> 00:01:11,835
 Here I have a equals one over N,

26
00:01:11,835 --> 00:01:14,745
 as N grows one over N goes to zero.

27
00:01:14,745 --> 00:01:16,440
 So there's a reasonable approximation,

28
00:01:16,440 --> 00:01:19,580
 so I can replace one minus one over N by E to

29
00:01:19,580 --> 00:01:23,220
 the minus one over N. So I have E to the minus MK

30
00:01:23,220 --> 00:01:26,610
 over N. Recall that C is the ratio

31
00:01:26,610 --> 00:01:30,660
 of the size of the hash table to the size of the database.

32
00:01:30,660 --> 00:01:34,730
 Therefore, this expression can be simplified to E to the minus K over

33
00:01:34,730 --> 00:01:36,990
 C. So now I have a very simple expression for

34
00:01:36,990 --> 00:01:39,450
 the probability that a specific bit is zero.

35
00:01:39,450 --> 00:01:41,370
 Recall our original problem.

36
00:01:41,370 --> 00:01:45,110
 We have an element X which was not inserted into our database.

37
00:01:45,110 --> 00:01:48,410
 We want to look at the probability of a false positive for this element.

38
00:01:48,410 --> 00:01:50,190
 So what's the chance we output yes,

39
00:01:50,190 --> 00:01:53,575
 even though X was not inserted into the database?

40
00:01:53,575 --> 00:01:57,390
 So what's the probability that all of these K Bits corresponding to

41
00:01:57,390 --> 00:02:01,515
 X were set to one by some other insertions?

42
00:02:01,515 --> 00:02:04,590
 Well, the probability of a specific Bit being set to zero.

43
00:02:04,590 --> 00:02:08,810
 We've just analyzed and shown that it's approximately E to the minus K over

44
00:02:08,810 --> 00:02:13,735
 C. So what's the probability one of these specific Bits is set to one?

45
00:02:13,735 --> 00:02:16,300
 It's one minus the probability that is set to zero.

46
00:02:16,300 --> 00:02:18,870
 The probability set to zero is E minus K over C,

47
00:02:18,870 --> 00:02:21,820
 the probability set to one is one minus E minus K over

48
00:02:21,820 --> 00:02:25,705
 C. And we want K specific Bits all set to one.

49
00:02:25,705 --> 00:02:26,925
 So the probability of that,

50
00:02:26,925 --> 00:02:32,610
 is this raised to the power K. This expression is the false positive probability.

51
00:02:32,610 --> 00:02:34,260
 It's not very nice right now because we have this

52
00:02:34,260 --> 00:02:37,705
 K. Can we simplify this by eliminating K?

53
00:02:37,705 --> 00:02:38,760
 Can we figure out what is

54
00:02:38,760 --> 00:02:43,410
 the optimal K in order to minimize this false positive probability?

55
00:02:43,410 --> 00:02:45,255
 Recall our intuition from before,

56
00:02:45,255 --> 00:02:47,890
 we wanted to have K not too small,

57
00:02:47,890 --> 00:02:49,070
 if K is small,

58
00:02:49,070 --> 00:02:50,820
 then when we do a query,

59
00:02:50,820 --> 00:02:52,800
 we're checking too few bits.

60
00:02:52,800 --> 00:02:55,680
 But if K was big, if it's too large,

61
00:02:55,680 --> 00:03:00,415
 then when we do an assertion we're setting too many bits to one, for each insertion.

62
00:03:00,415 --> 00:03:03,480
 So there's some middle ground and we want to figure out the optimal choice of

63
00:03:03,480 --> 00:03:06,420
 K in order to minimize this false positive probability.

64
00:03:06,420 --> 00:03:07,830
 So what are we going to do?

65
00:03:07,830 --> 00:03:09,710
 We're going to take this function.

66
00:03:09,710 --> 00:03:11,365
 We're going to take its derivative.

67
00:03:11,365 --> 00:03:13,380
 Set it at equal to zero and find

68
00:03:13,380 --> 00:03:16,850
 the optimal choice of K in order to minimize this expression.

69
00:03:16,850 --> 00:03:19,410
 So a bit of calculus, we're going to skip it.

70
00:03:19,410 --> 00:03:19,410
 But I'll tell you the punchline.

